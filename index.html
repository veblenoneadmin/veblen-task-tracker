<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VEBLEN Task Tracker</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>🚀 VEBLEN</h1>
                <span>Unified Task & Time Tracker</span>
            </div>
            <div class="header-info">
                <div class="live-indicator">
                    <span class="dot"></span>
                    Live
                </div>
                <div class="current-time" id="currentTime"></div>
            </div>
        </header>

        <!-- Employee Selection -->
        <section class="employee-section">
            <div class="card">
                <h3>👤 Select Employee</h3>
                <select id="employeeSelect" onchange="loadEmployeeData()">
                    <option value="">Choose Your Name</option>
                    <option value="Tony Herrera">Tony Herrera</option>
                    <option value="Alex">Alex</option>
                    <option value="Ridho">Ridho</option>
                    <option value="Jevahn">Jevahn</option>
                    <option value="Risna">Risna</option>
                    <option value="Pran Setiawan">Pran Setiawan</option>
                    <option value="Wayan Arfian (Konsep Kreatif)">Wayan Arfian (Konsep Kreatif)</option>
                    <option value="Hanif (Konsep Kreatif)">Hanif (Konsep Kreatif)</option>
                    <option value="Eden">Eden</option>
                    <option value="Social Media Manager">Social Media Manager</option>
                    <option value="Zac Macanally">Zac Macanally</option>
                </select>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="quick-actions">
            <div class="card">
                <h3>⚡ Quick Actions</h3>
                <div class="action-grid">
                    <button class="action-btn new-task" onclick="toggleNewTaskForm()">
                        <span class="icon">➕</span>
                        <span>New Task</span>
                    </button>
                    <a href="https://your-n8n-instance.com/form/timelogger" class="action-btn time-clock" target="_blank">
                        <span class="icon">🕰️</span>
                        <span>Time Clock</span>
                    </a>
                    <a href="https://your-n8n-instance.com/form/reportlogger" class="action-btn daily-report" target="_blank">
                        <span class="icon">📋</span>
                        <span>Daily Report</span>
                    </a>
                    <button class="action-btn refresh" onclick="loadEmployeeData()">
                        <span class="icon">🔄</span>
                        <span>Refresh</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Active Task Display -->
        <section id="activeTaskSection" class="active-task-section hidden">
            <div class="card active-task">
                <div class="task-header">
                    <h3>🟢 Currently Working</h3>
                    <div class="task-status" id="taskStatus">Active</div>
                </div>
                <div class="task-info">
                    <div id="currentTaskName" class="task-name"></div>
                    <div id="taskDetails" class="task-details"></div>
                </div>
                <div id="timer" class="timer">00:00:00</div>
                <div class="task-actions">
                    <button class="btn btn-pause" onclick="pauseTask()">
                        ⏸️ Take Break
                    </button>
                    <button class="btn btn-complete" onclick="completeTask()">
                        ✅ Complete Task
                    </button>
                </div>
            </div>
        </section>

        <!-- New Task Creation -->
        <section id="newTaskSection" class="new-task-section hidden">
            <div class="card">
                <h3>🆕 Start New Task</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="taskName">What are you working on?</label>
                        <input type="text" id="taskName" placeholder="e.g., Edit LCMB promotional video">
                    </div>
                    <div class="form-group">
                        <label for="company">Company/Client</label>
                        <select id="company">
                            <option value="">Select Company</option>
                            <option value="VEBLEN (Internal)">VEBLEN Internal</option>
                            <option value="LCMB GROUP">LCMB GROUP</option>
                            <option value="NEWTECH TRAILERS">NEWTECH TRAILERS</option>
                            <option value="CROWN REALITY">CROWN REALITY</option>
                            <option value="FLECK GROUP">FLECK GROUP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskType">Task Type</label>
                        <select id="taskType">
                            <option value="">Select Task Type</option>
                            <option value="Video Editing">🎬 Video Editing</option>
                            <option value="Content Creation">✍️ Content Creation</option>
                            <option value="Client Meeting">🤝 Client Meeting</option>
                            <option value="Research">🔍 Research</option>
                            <option value="Design">🎨 Design</option>
                            <option value="Development">💻 Development</option>
                            <option value="Social Media">📱 Social Media</option>
                            <option value="Copywriting">📝 Copywriting</option>
                            <option value="Admin">⚙️ Admin</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label for="taskDescription">Description (optional)</label>
                        <textarea id="taskDescription" placeholder="Provide detailed task description"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button class="btn btn-cancel" onclick="toggleNewTaskForm()">
                        Cancel
                    </button>
                    <button class="btn btn-start" onclick="startNewTask()">
                        🚀 Start Working
                    </button>
                </div>
            </div>
        </section>

        <!-- Assigned Tasks from Intake System -->
        <section id="assignedTasksSection" class="assigned-tasks-section">
            <div class="card">
                <h3>📋 My Assigned Tasks</h3>
                <div id="assignedTasksList" class="tasks-list">
                    <p class="empty-state">Select an employee to see assigned tasks</p>
                </div>
            </div>
        </section>

        <!-- Today's Progress -->
        <section class="progress-section">
            <div class="card">
                <h3>📊 Today's Progress</h3>
                <div id="todaySummary" class="progress-content">
                    <div class="progress-item">
                        <div class="progress-value">0.0</div>
                        <div class="progress-label">Hours Today</div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-value">0</div>
                        <div class="progress-label">Tasks Completed</div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-value">0</div>
                        <div class="progress-label">Companies</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Status Update Modal -->
        <div id="statusModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>🔄 Update Task Status</h3>
                    <button class="close-btn" onclick="closeStatusModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="statusTaskInfo" class="task-info-display">
                        <p><strong>Task:</strong> <span id="statusTaskName"></span></p>
                        <p><strong>Company:</strong> <span id="statusTaskCompany"></span></p>
                        <p><strong>Current Status:</strong> <span id="statusCurrentStatus"></span></p>
                    </div>
                    <div id="statusOptions" class="status-options">
                        <!-- Status options will be populated dynamically -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-cancel" onclick="closeStatusModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="updateTaskStatus()">Update Status</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="spinner"></div>
            <p>Processing...</p>
        </div>

        <!-- Notifications -->
        <div id="notifications" class="notifications"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
